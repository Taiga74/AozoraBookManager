<h1 class="my-4">AozoraBook</h1>

<% if user_signed_in? %>
  <%= form_with url: search_books_path, method: :get, local: true, class: "mb-4" do |form| %>
    <div class="mb-3">
      <%= form.label :query, "作品名・作者で検索", class: "form-label" %>
      <%= form.text_field :query, value: params[:query], class: "form-control" %>
    </div>

    <div class="mb-3">
      <%= form.label :category, "カテゴリで検索", class: "form-label" %>
      <%= form.select :category, options_for_select(@categories.map { |c| [c.category, c.category] }, params[:category]), include_blank: true, class: "form-select" %>
    </div>

    <div>
      <%= form.submit "Search", class: "btn btn-primary" %>
    </div>
  <% end %>
<% else %>
  <p>Please <%= link_to 'log in', new_user_session_path %> to use the search and favorite features.</p>
<% end %>

<ul class="list-group">
  <% @books.each do |book| %>
    <li class="list-group-item">
      <%= link_to book.title, book_path(book) %>
    </li>
  <% end %>
</ul>

